<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ page }}</ion-title>
  </ion-toolbar>
</ion-header> -->

<app-header [page]="page"></app-header>

<ion-content>

  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ page }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  
  <p>HISTORIAL DE SERVICIOS</p>

  <div>
    <ion-modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>DETALLE SERVICIO</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)">CERRAR</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <app-detalle-serv-cliente [serv]="servicio"></app-detalle-serv-cliente>
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>

  <ion-card *ngFor="let serv of servicios" (click)="setServ(serv);setOpen(true)">
    <ion-card-header>
      <ion-card-title>{{serv.VEHICULO.MODELO.MARCA.DESCRIPCION}} {{serv.VEHICULO.MODELO.DESCRIPCION}} {{serv.VEHICULO.COLOR}} {{serv.VEHICULO.ANIO}}</ion-card-title>
      <ion-card-subtitle>{{serv.VEHICULO.MATRICULA}}</ion-card-subtitle>
    </ion-card-header>
  
    <ion-card-content>
      <p>MANTENIMIENTO {{serv.TIPO_SERVICIO.DESCRIPCION}}</p>   

      <div>
          <div *ngIf="serv.TECNICO_ENCARGADO">                   
            <ion-avatar>
              <img class="imgTecnico"
              src="{{ url }}{{
                serv.TECNICO_ENCARGADO.IMG ?? 'default.png'
              }}"
              alt=""/> 
            </ion-avatar> {{serv.TECNICO_ENCARGADO.NOMBRE}}
          </div>    

          <div *ngIf="serv.TECNICO_ENCARGADO==null">
            TÉCNICO ENCARGADO: NO ASIGNADO
          </div>
      </div>
    </ion-card-content>
  </ion-card>

  <div hidden id="noServices">
    <img src="../../assets/sin-autos.png" alt="">
    <p>No tiene ningún auto en servicio</p>
  </div>


</ion-content>
