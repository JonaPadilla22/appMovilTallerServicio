<ion-header>
  <ion-toolbar>
    <ion-title></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div>
    <ion-modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>DETALLE CITA</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)">CERRAR</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <app-detalle-citas-cliente [cita]="cita" [id_cita]="id_cita"></app-detalle-citas-cliente>
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>

  <ion-card *ngFor="let serv of citas" (click)="setServ(serv);setOpen(true)">
    <ion-card-header>
      <ion-card-title
        >{{serv.VEHICULO.MODELO.MARCA.DESCRIPCION}}
        {{serv.VEHICULO.MODELO.DESCRIPCION}} {{serv.VEHICULO.COLOR}}
        {{serv.VEHICULO.ANIO}}</ion-card-title
      >
      <ion-card-subtitle>{{serv.VEHICULO.MATRICULA}}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <div class="info-mantenimiento">
        <span>MANTENIMIENTO:</span>
        <p>{{serv.TIPO_SERVICIO.DESCRIPCION}}</p>
        <span>FECHA CITA:</span>
        <p>{{serv.FECHA_CITA | date: 'medium'}}</p>
      </div>
      <div class="tecnico-mantenimiento">
        <div *ngIf="serv.TECNICO_ENCARGADO">
          <ion-avatar>
            <img
              class="imgTecnico"
              src="{{ url }}{{
                serv.TECNICO_ENCARGADO.IMG ?? 'default.png'
              }}"
              alt=""
            />
          </ion-avatar>
          {{serv.TECNICO_ENCARGADO.NOMBRE}}
        </div>

        <div *ngIf="!serv.TECNICO_ENCARGADO">
          TÉCNICO ENCARGADO: NO ASIGNADO
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- <div class="card" *ngFor="let serv of citas">
    <div class="contenido-card" id="tarjeta" (click)="setServ(serv);setOpen(true)">
      <h4>{{serv.VEHICULO.MODELO.MARCA.DESCRIPCION}} {{serv.VEHICULO.MODELO.DESCRIPCION}} {{serv.VEHICULO.COLOR}} {{serv.VEHICULO.ANIO}}</h4>
      {{serv.VEHICULO.MATRICULA}}
      <p>MANTENIMIENTO {{serv.TIPO_SERVICIO.DESCRIPCION}}</p>   
      <p>FECHA CITA: {{serv.FECHA_CITA | date: 'medium'}}</p>
      <div>
        <p *ngIf="serv.TECNICO_ENCARGADO">
          <img class="imgTecnico"
          src="{{ url }}{{
            serv.TECNICO_ENCARGADO.IMG ?? 'default.png'
          }}"
          alt=""/> {{serv.TECNICO_ENCARGADO.NOMBRE}} </p>
        <p *ngIf="serv.TECNICO_ENCARGADO==null">TÉCNICO ENCARGADO: NO ASIGNADO</p>
      </div>
    </div>
  </div> -->
</ion-content>
